@using Radzen
@using Radzen.Blazor
@using QLCongViec.Models.SangKienCaiTien
@inject DialogService DialogService

<RadzenCard Style="padding:0;border:none;box-shadow:none;
                  font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;">

    <!-- TIÊU ĐỀ -->
    <div style="padding:20px 24px;border-bottom:1px solid #f0f0f0;">
        <RadzenText TextStyle="TextStyle.H6"
                    TagName="TagName.H2"
                    Style="font-weight:600;margin:0;color:#111827">
            Chi tiết sáng kiến cải tiến
        </RadzenText>
    </div>

    <!-- NỘI DUNG -->
    <div style="padding:24px;max-height:60vh;overflow-y:auto;">

        <!-- TRẠNG THÁI -->
        <div style="margin-bottom:20px;">
            <RadzenText TextStyle="TextStyle.Caption"
                        Style="color:#6b7280;margin-bottom:4px;display:block">
                Trạng thái
            </RadzenText>

            @TrangThaiBadge(Model?.idTrangThai)
        </div>

        <!-- TÊN SÁNG KIẾN -->
        <ThongTin label="Tên sáng kiến"
                  value="@Model?.tenSangKienCaiTien" />

        <!-- TÁC GIẢ -->
        <ThongTin label="Tác giả"
                  value="@Model?.tenTacGia" />

        <!-- ĐỒNG TÁC GIẢ -->
        <ThongTin label="Đồng tác giả"
                  value="@Model?.tenDongTacGia" />

        <!-- CẤP BẬC -->
        <ThongTin label="Cấp bậc tác giả"
                  value="@Model?.capBacTacGia" />

        <!-- NĂM HỌC -->
        <ThongTin label="Năm học"
                  value="@Model?.namHoc" />
<!-- NGÀY THỰC HIỆN -->
<ThongTin label="Ngày thực hiện"
          value="@NgayThucHienText" />

<!-- ĐỊA ĐIỂM -->
<ThongTin label="Địa điểm thực hiện"
          value="@Model?.diaDiemThucHien" />

        <!-- PHẠM VI -->
        <ThongTin label="Phạm vi thực hiện"
                  value="@Model?.phamViThucHien" />

        <!-- MÔ TẢ -->
        <ThongTin label="Mô tả"
                  value="@Model?.moTa" />

        <!-- KẾT QUẢ -->
        <ThongTin label="Kết quả"
                  value="@Model?.ketQua" />

    </div>

    <!-- FOOTER -->
    <div style="padding:16px 24px;border-top:1px solid #f0f0f0;">
        <RadzenButton Text="Đóng"
                      Click="() => DialogService.Close()"
                      Style="width:100%;
                             background:#374151;
                             color:white;
                             border-radius:6px;
                             height:40px;
                             font-weight:500;" />
    </div>

</RadzenCard>

@code {

    [Parameter]
    public long Id { get; set; }
    public tbSangKienCaiTien? Model { get; set; }

    string? NgayThucHienText =>
       Model?.ngayThucHien?.ToString("dd/MM/yyyy");
    RenderFragment TrangThaiBadge(int? trangThai) => builder =>
    {
        var (text, bg, color) = trangThai switch
        {
            1 => ("Đã phê duyệt", "#ecfdf5", "#10b981"),
            0 => ("Chờ xét duyệt", "#fff7ed", "#f59e0b"),
            _ => ("Không phê duyệt", "#fef2f2", "#ef4444")
        };

        builder.OpenElement(0, "span");
        builder.AddAttribute(1, "style",
            $"padding:6px 12px;border-radius:999px;" +
            $"background:{bg};color:{color};font-weight:500");
        builder.AddContent(2, text);
        builder.CloseElement();
    };

}
