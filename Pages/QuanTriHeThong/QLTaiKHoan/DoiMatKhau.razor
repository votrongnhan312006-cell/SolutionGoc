@page "/DoiMatKhau1"
@using IDC.BlazorUi.Components.Components
@using IDC.Frontend.Services
@using QLCongViec.Models
@using QLCongViec.Components
@using QLCongViec.Models.HeThong
@inject NavigationManager UriHelper
@inject ClientServices client
<style>
.rz-label {
margin-bottom: 0;
font-weight: bold;
}

.rz-column-title-content {
font-weight: bold;
}
</style>

<TableAPI @ref=grd TItem="tbSystemUser" TableTitle="TÀI KHOẢN NGƯỜI DÙNG" FormTitle="THÔNG TIN MẬT KHẨU" query=@query lamda=@lamda
   AddNew=false isSearch=false ShowClose=true >
<MoreColumns>
<RadzenDataGridColumn TItem="tbSystemUser" Title="Tên tài khoản" TextAlign="TextAlign.Left" Sortable="false"
  Width="200px" Property="UserName" Frozen="true">
</RadzenDataGridColumn>
<RadzenDataGridColumn TItem="tbSystemUser" Title="Họ và tên người dùng" TextAlign="TextAlign.Left" Sortable="false"
  Width="100%" Property="FullName" Frozen="true">
</RadzenDataGridColumn>
</MoreColumns>
<FormDialog Context="ctx">
<DoiMatKhau_Detail Record="ctx" />
</FormDialog>
</TableAPI>

@code {
[CascadingParameter] private Task<AuthenticationState> authenticationState { get; set; } = default!;
TableAPI<tbSystemUser> grd;
string query;
tbUser user = new tbUser();
string lamda = "";
protected override async Task OnInitializedAsync()
{
//var authState = await authenticationState;
//string token = authState.User.Claims. ?? "";
//user = await apiService.Me<tbUser>("api/user/me");
// user = await autService.GetMe();
// query = "api/systemuser/getallpaged";
// lamda = "p=>(p.IdUser==" + user.IdUser + ")";

// //user = dbContext.tbUsers.Where(item => item.token == token).FirstOrDefault();
// if (user == null)
// {
// UriHelper.NavigateTo($"/login", true);
// }
}
}